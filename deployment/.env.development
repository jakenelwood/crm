# ðŸŒ± GardenOS Development Environment - Hetzner Single Node
# Development environment variables for single-node Hetzner deployment
# Based on docs/database/gardenOS_dev_vs_production.md

# =============================================================================
# POSTGRESQL CLUSTER CONFIGURATION (Multi-Node HA Simulation)
# =============================================================================
POSTGRES_PASSWORD=CRM_Dev_Password_2025_Hetzner
POSTGRES_REPLICATION_PASSWORD=CRM_Replication_Dev_2025_Hetzner
POSTGRES_ADMIN_PASSWORD=CRM_Admin_Dev_2025_Hetzner
CRM_USER_PASSWORD=CRM_User_Dev_2025_Hetzner
POSTGRES_DB=crm
POSTGRES_USER=postgres

# Database Connection (via HAProxy - simulating production HA)
DATABASE_URL=postgres://postgres:CRM_Dev_Password_2025_Hetzner@haproxy:5000/crm
DB_HOST=haproxy
DB_PORT=5000
DB_NAME=crm
DB_USER=postgres

# =============================================================================
# SUPABASE CONFIGURATION (Development)
# =============================================================================
# JWT Configuration (Development - can use demo keys)
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long-for-development
SECRET_KEY_BASE=your-super-secret-key-base-with-at-least-64-characters-long-for-realtime-development

# Supabase Keys (Development - using demo keys for simplicity)
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Site Configuration (Development)
SITE_URL=http://5.161.110.205:3000,http://localhost:3000
ADDITIONAL_REDIRECT_URLS=http://localhost:3000,http://5.161.110.205:3000,http://127.0.0.1:3000

# Studio Configuration
DEFAULT_ORGANIZATION_NAME=Twincigo CRM Development
DEFAULT_PROJECT_NAME=Development CRM

# =============================================================================
# SERVICE URLS (Development - Hetzner Server with HA Simulation)
# =============================================================================
# External access URLs for localhost:3000 to connect
SUPABASE_URL=http://5.161.110.205:3000
SUPABASE_AUTH_URL=http://5.161.110.205:9999
SUPABASE_REALTIME_URL=http://5.161.110.205:4000
SUPABASE_STORAGE_URL=http://5.161.110.205:5002
SUPABASE_STUDIO_URL=http://5.161.110.205:3001

# HAProxy endpoints (simulating production HA)
HAPROXY_PRIMARY_URL=postgres://postgres:CRM_Dev_Password_2025_Hetzner@5.161.110.205:5000/crm
HAPROXY_REPLICA_URL=postgres://postgres:CRM_Dev_Password_2025_Hetzner@5.161.110.205:5001/crm
HAPROXY_STATS_URL=http://5.161.110.205:7000/stats

# Direct PostgreSQL access (for debugging - bypassing HAProxy)
POSTGRES_NODE_1_URL=postgres://postgres:CRM_Dev_Password_2025_Hetzner@5.161.110.205:5432/crm
POSTGRES_NODE_2_URL=postgres://postgres:CRM_Dev_Password_2025_Hetzner@5.161.110.205:5433/crm
POSTGRES_NODE_3_URL=postgres://postgres:CRM_Dev_Password_2025_Hetzner@5.161.110.205:5434/crm

# Patroni REST API endpoints
PATRONI_NODE_1_API=http://5.161.110.205:8008
PATRONI_NODE_2_API=http://5.161.110.205:8009
PATRONI_NODE_3_API=http://5.161.110.205:8010

# Development tools
ADMINER_URL=http://5.161.110.205:8081
REDIS_COMMANDER_URL=http://5.161.110.205:8082

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
NODE_ENV=development
LOG_LEVEL=debug
ENABLE_LOGS=true
DEBUG=true

# Database Logging (Enabled for development)
LOG_DATABASE_QUERIES=true

# Security (Development - relaxed)
DISABLE_AUTH=false
ALLOW_INSECURE_CONNECTIONS=true

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_EXTERNAL_URL=redis://5.161.110.205:6379

# =============================================================================
# FASTAPI BACKEND (Phase 2 - Optional)
# =============================================================================
FASTAPI_URL=http://5.161.110.205:8000
API_BASE_URL=http://5.161.110.205:8000

# =============================================================================
# DEVELOPMENT FEATURES
# =============================================================================
# Enable debug features
ENABLE_DEBUG_ROUTES=true
ENABLE_CORS=true
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://5.161.110.205:3000

# Development monitoring
ENABLE_METRICS=true
ENABLE_HEALTH_CHECKS=true

# =============================================================================
# EXTERNAL INTEGRATIONS (Development)
# =============================================================================
# RingCentral (Development/Sandbox)
RINGCENTRAL_SERVER=https://platform.devtest.ringcentral.com
RINGCENTRAL_OAUTH_SCOPES=SMS ReadCallLog ReadMessages ReadPresence RingOut

# Email Configuration (Development - optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=

# =============================================================================
# BRANDING
# =============================================================================
BRAND_NAME=Twincigo
BRAND_TAGLINE=The Pipeline Whisperer
APP_NAME=Insurance CRM Development
APP_VERSION=dev-1.0.0

# =============================================================================
# FEATURE FLAGS (Development)
# =============================================================================
ENABLE_MULTI_TENANT=true
ENABLE_FOLLOW_UP_SYSTEM=true
ENABLE_QUOTE_MANAGEMENT=true
ENABLE_COMMERCIAL_LINES=true
ENABLE_AI_FEATURES=true
ENABLE_ANALYTICS=false  # Disabled per development strategy
ENABLE_REALTIME=true
ENABLE_STORAGE=true

# Development-specific features
ENABLE_MOCK_DATA=true
ENABLE_SEED_DATA=true
ENABLE_DEV_TOOLS=true

# =============================================================================
# PERFORMANCE SETTINGS (Development - Relaxed)
# =============================================================================
# Connection Pool Settings (Smaller for dev)
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# Cache Settings (Smaller for dev)
CACHE_TTL=1800  # 30 minutes
CACHE_MAX_SIZE=100

# =============================================================================
# DEVELOPMENT METADATA
# =============================================================================
DEPLOYMENT_DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
DEPLOYMENT_VERSION=gardenos-dev-hetzner-v1.0.0
DEPLOYMENT_ENVIRONMENT=development
DEPLOYMENT_SERVER=hetzner-5.161.110.205
DEPLOYMENT_TYPE=single-node-development

# =============================================================================
# GARDENOS DEVELOPMENT STRATEGY NOTES
# =============================================================================
# This configuration implements the Development strategy from:
# docs/database/gardenOS_dev_vs_production.md
#
# âœ… Single CCX33 node (Hetzner server)
# âœ… Simplified setup for rapid prototyping
# âœ… Docker Compose based (not K8s/Swarm)
# âœ… No true HA (acceptable for development)
# âœ… Analytics disabled (per strategy)
# âœ… Direct PostgreSQL connection (no HAProxy needed)
# âœ… All services on same node
# âœ… Development-friendly logging and debugging
#
# Connection Flow:
# localhost:3000 -> Hetzner:5432 (PostgreSQL) + Supabase Services
#
# Benefits:
# - Simple single-node setup
# - Easy debugging and development
# - Cost-effective for development
# - Follows GardenOS modular design
# - Ready for production scaling when needed
#
# Future Production Evolution:
# - Scale to 3Ã— CCX33 nodes
# - Add Patroni + HAProxy for HA
# - Container orchestration (Swarm/K8s)
# - Enhanced monitoring and alerting
