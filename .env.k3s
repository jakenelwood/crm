# üöÄ GardenOS K3s Cluster Environment Configuration
# Configuration for connecting Next.js frontend to K3s backend services

# =============================================================================
# DEPLOYMENT TARGET
# =============================================================================
NEXT_PUBLIC_DEPLOYMENT_TARGET=hetzner-k3s

# =============================================================================
# API CONFIGURATION (K3s Services)
# =============================================================================
# Main FastAPI backend service
NEXT_PUBLIC_API_BASE_URL=http://api.gardenos.local

# AI Orchestration endpoints
NEXT_PUBLIC_AI_API_BASE_URL=http://api.gardenos.local/ai

# =============================================================================
# SUPABASE CONFIGURATION (K3s Deployment)
# =============================================================================
# Supabase services running in K3s cluster
NEXT_PUBLIC_SUPABASE_URL=http://api.gardenos.local/supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_k3s_supabase_anon_key

# Supabase service endpoints (internal K3s services)
SUPABASE_AUTH_URL=http://gotrue.supabase.svc.cluster.local:9999
SUPABASE_REST_URL=http://postgrest.supabase.svc.cluster.local:3000
SUPABASE_STORAGE_URL=http://storage-api.supabase.svc.cluster.local:5000

# =============================================================================
# DATABASE CONNECTION (K3s PostgreSQL Cluster)
# =============================================================================
# PostgreSQL cluster with Patroni HA
DATABASE_URL=postgresql://postgres:postgres@postgres-cluster.postgres-cluster.svc.cluster.local:5432/postgres

# Connection via HAProxy (external access)
DATABASE_URL_EXTERNAL=postgresql://postgres:postgres@5.161.110.205:5432/postgres

# =============================================================================
# AI CONFIGURATION
# =============================================================================
# DeepSeek-V3-0324 via DeepInfra (https://deepinfra.com/deepseek-ai/DeepSeek-V3-0324)
DEEPINFRA_API_KEY=your_deepinfra_api_key_here
OPENAI_API_KEY=your_deepinfra_api_key_here  # Same key, OpenAI-compatible API

# AI agent configuration
MAX_LEAD_ANALYSIS_AGENTS=3
MAX_FOLLOW_UP_AGENTS=2
LEAD_ANALYSIS_TIMEOUT=30
FOLLOW_UP_TIMEOUT=20

# =============================================================================
# BRANDING
# =============================================================================
NEXT_PUBLIC_BRAND_NAME=GardenOS
NEXT_PUBLIC_BRAND_TAGLINE=AI-Native CRM Platform
NEXT_PUBLIC_APP_NAME=GardenOS CRM

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NEXT_PUBLIC_APP_URL=https://crm-jakenelwoods-projects.vercel.app
NODE_ENV=production

# Feature flags
NEXT_PUBLIC_ENABLE_AI_FEATURES=true
NEXT_PUBLIC_ENABLE_SAMPLE_DATA=false
NEXT_PUBLIC_ENABLE_PDF_EXPORT=true

# =============================================================================
# RINGCENTRAL INTEGRATION
# =============================================================================
RINGCENTRAL_CLIENT_ID=your_ringcentral_client_id
RINGCENTRAL_CLIENT_SECRET=your_ringcentral_client_secret
RINGCENTRAL_SERVER=https://platform.ringcentral.com
RINGCENTRAL_OAUTH_SCOPES=SMS ReadCallLog ReadMessages ReadPresence RingOut
RINGCENTRAL_FROM_NUMBER=+1234567890

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================
# Prometheus metrics endpoint
PROMETHEUS_URL=http://prometheus.monitoring.svc.cluster.local:9090

# Grafana dashboard URL
GRAFANA_URL=http://grafana.monitoring.svc.cluster.local:3000

# Enable detailed logging
LOG_LEVEL=info
LOG_DATABASE_QUERIES=false

# =============================================================================
# SECURITY
# =============================================================================
NEXTAUTH_SECRET=your_nextauth_secret_for_k3s_deployment
NEXTAUTH_URL=https://crm-jakenelwoods-projects.vercel.app

# JWT configuration
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRES_IN=24h

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
BACKEND_CORS_ORIGINS=["https://crm-jakenelwoods-projects.vercel.app", "http://localhost:3000", "http://api.gardenos.local"]

# =============================================================================
# INGRESS AND NETWORKING
# =============================================================================
# Ingress controller configuration
INGRESS_HOST=api.gardenos.local
INGRESS_CLASS=nginx

# Load balancer IPs (Hetzner servers)
LOAD_BALANCER_IPS=5.78.103.224,5.161.110.205,178.156.186.10

# =============================================================================
# BACKUP AND STORAGE
# =============================================================================
# File storage configuration
STORAGE_PROVIDER=supabase
STORAGE_BUCKET=crm-documents

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# =============================================================================
# DEVELOPMENT AND DEBUGGING
# =============================================================================
# Enable debug features in non-production
DEBUG_MODE=false
ENABLE_QUERY_LOGGING=false
ENABLE_PERFORMANCE_MONITORING=true

# API timeouts
API_TIMEOUT=30000
DATABASE_TIMEOUT=5000
AI_REQUEST_TIMEOUT=60000

.env.local
# üè¢ CRM Application Environment Configuration
# Copy this file to .env.local and update with your values

# =============================================================================
# BRANDING
# =============================================================================
NEXT_PUBLIC_BRAND_NAME=Twincigo
NEXT_PUBLIC_BRAND_TAGLINE=The Pipeline Whisperer

# =============================================================================
# DATABASE CONNECTION (Hetzner PostgreSQL)
# =============================================================================
DATABASE_URL=postgresql://crm_user:dbD1HZ1DSuO9og0JgMNNwTEnEcQ9fv9khwLoUXYZEvE=@5.161.110.205:5432/crm

# =============================================================================
# SERVER CONNECTION (Hetzner)
# =============================================================================
Hetzner Server IP: 5.161.110.205
ssh root@5.161.110.205
ssh -i ~/.ssh/id_ed25519 root@5.161.110.205
User: root
Password: g9v3dKUrfqNsp7pnVHWi

# =============================================================================
# AUTHENTICATION (Supabase Auth - can be migrated later)
# =============================================================================
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# =============================================================================
# RINGCENTRAL INTEGRATION
# =============================================================================
# Required: Get these from RingCentral Developer Portal
RINGCENTRAL_CLIENT_ID=your_ringcentral_client_id
RINGCENTRAL_CLIENT_SECRET=your_ringcentral_client_secret

# Server URL (usually production)
RINGCENTRAL_SERVER=https://platform.ringcentral.com

# OAuth Scopes (space-separated, no commas)
RINGCENTRAL_OAUTH_SCOPES=SMS ReadCallLog ReadMessages ReadPresence RingOut

# OAuth Redirect URI (auto-constructed from NEXT_PUBLIC_APP_URL if not set)
# REDIRECT_URI=http://localhost:3000/oauth-callback

# Required: Default phone number for outbound calls (E.164 format)
RINGCENTRAL_FROM_NUMBER=+1234567890

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME="Insurance CRM"

# Development mode
NODE_ENV=development

# =============================================================================
# ORGANIZATION SETUP (Multi-tenant)
# =============================================================================
# For initial setup - these will be created in the database
DEFAULT_ORGANIZATION_NAME="Your Insurance Agency"
DEFAULT_ORGANIZATION_TYPE=Agency
DEFAULT_LOCATION_NAME="Main Office"

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_MULTI_TENANT=true
ENABLE_FOLLOW_UP_SYSTEM=true
ENABLE_QUOTE_MANAGEMENT=true
ENABLE_COMMERCIAL_LINES=true
ENABLE_AI_FEATURES=true

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================
# Email service (for notifications)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# SMS service (for text messaging)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# SECURITY
# =============================================================================
NEXTAUTH_SECRET=your_nextauth_secret_here
NEXTAUTH_URL=http://localhost:3000
JWT_SECRET=your-super-secret-jwt-key-for-development-only-change-in-production

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# Enable debug logging
DEBUG_MODE=true
LOG_LEVEL=info

# Database query logging
LOG_DATABASE_QUERIES=false
