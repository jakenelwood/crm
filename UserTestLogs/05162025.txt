ALL COOKIES RECEIVED BY /exchange-code (Name: Value):
  ajs_anonymous_id: 0d631a5c-0901-4f52-84f8-c8302dcc8d0b
  ringcentral_token_type: bearer
  ringcentral_scope: ReadAccounts RingOut SMS
  __next_hmr_refresh_hash__: db057684a4bb05339576c65daaa3e35f46fa27693254fc75
  sb-vpwvdfrxvvuxojejnegm-auth-token: base64-eyJhY2Nlc3NfdG9rZW4iOiJleUpoYkdjaU9pSklVekkxTmlJc0ltdHBaQ0k2SWt...
  ringcentral_access_token: SUFEMDFQMDFQQVMwMHxBQURTUUZ2SnhHRVczS21kRjBDOFBCdmJtV01xcXBwd0RzZ012M2...
  ringcentral_refresh_token: SUFEMDFQMDFQQVMwMHxBQUFsN0tXRzY2ZDdkeEYyZnhnejJEbDdVZ21SYzc5M2ZSdzM4WV...
  ringcentral_access_token_expiry_time: 1747875748775
  ringcentral_refresh_token_expiry_time: 1748476948853
  rc_oauth_state: s8z812m0948
  rc_code_verifier: l-QP8QvHJxSc5YC_PXutdoRqySNwLfhoLiTEEvTjdWg
Query params: {
  code: 'SUFEMDFQMDFQQVMwMHxBQUJIYUNDSENDcS1jTEVOVFU1TnhmaVJNWTdwY3VXUENjVDNJdnk0OGNVa0VvUkt5TnVtZV82RmpzRGp0bDhPSDlTN3VMajVkOW1GUWxoeGlyQzBxcXhpMXJEa1hQTVR5TllSRGQ5VkJWcTU3Nm5aWjJDbjl2WmRMRGZRS2hNOHMyS0wxUmRwbFJLeXhPNGFKY3BoMFR1R0RVTFZmZEVKSFp1QWtYVGFscXVkd0taSFJzRHExRlluZjEycFg3Z1l8QnZEWHJRfE03c1E3VmhzU2hMVm9DVmFfSU1ZMWd8QVF8QUF8QUFBQUFCYkstdW8',
  state: 's8z812m0948'
}
Step 1: Exchanging authorization code for tokens with PKCE
Code verifier available (length): 43
REDIRECT_URI from config: http://localhost:3000/oauth-callback
REDIRECT_URI from env directly: http://localhost:3000/oauth-callback
NODE_ENV: development
VERCEL_URL: Not set
redirect_uri in token request: http://localhost:3000/oauth-callback
Token exchange successful
Token data received: {
  hasAccessToken: true,
  hasRefreshToken: true,
  expiresIn: 3600,
  tokenType: 'bearer',
  scope: 'ReadAccounts RingOut SMS'
}
Step 2: Storing tokens in cookies
Step 3: Storing tokens in Supabase
User found, storing tokens in database for user_id: 0066229f-b528-4390-b546-cf5211302a98
Token data to store: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  refreshTokenLength: 379,
  tokenType: 'bearer',
  expiresIn: 3600,
  expiresAt: '2025-05-22T01:26:35.175Z',
  scope: 'ReadAccounts RingOut SMS'
}
Attempting direct upsert to ringcentral_tokens table
✅ Token record upserted successfully.
✅ Verified token record (from upsert response): {
  id: 'e768266c-c4cf-41fb-b480-8524731cf8a5',
  user_id: '0066229f-b528-4390-b546-cf5211302a98',
  hasAccessToken: true,
  expires_at: '2025-05-22T01:26:35.175+00:00',
  refresh_token_expires_at: '2025-05-29T00:26:35.28+00:00'
}
========== RINGCENTRAL EXCHANGE CODE API - END (SUCCESS) ==========
 GET /api/ringcentral/auth/exchange-code?code=SUFEMDFQMDFQQVMwMHxBQUJIYUNDSENDcS1jTEVOVFU1TnhmaVJNWTdwY3VXUENjVDNJdnk0OGNVa0VvUkt5TnVtZV82RmpzRGp0bDhPSDlTN3VMajVkOW1GUWxoeGlyQzBxcXhpMXJEa1hQTVR5TllSRGQ5VkJWcTU3Nm5aWjJDbjl2WmRMRGZRS2hNOHMyS0wxUmRwbFJLeXhPNGFKY3BoMFR1R0RVTFZmZEVKSFp1QWtYVGFscXVkd0taSFJzRHExRlluZjEycFg3Z1l8QnZEWHJRfE03c1E3VmhzU2hMVm9DVmFfSU1ZMWd8QVF8QUF8QUFBQUFCYkstdW8&state=s8z812m0948 200 in 1373ms
 ○ Compiling /dashboard/settings/development/ringcentral-test-call ...
 ✓ Compiled /dashboard/settings/development/ringcentral-test-call in 1718ms (2459 modules)
 GET /dashboard/settings/development/ringcentral-test-call 200 in 1881ms
 GET /dashboard/settings/development/ringcentral-test-call 200 in 33ms
 GET /dashboard/settings/development/ringcentral-diagnostics 200 in 47ms
 GET /dashboard/settings/development/telephony/ringcentral 200 in 24ms
 GET /dashboard/settings/development/telephony/ringcentral 200 in 15ms
 GET /dashboard/settings/development/ringcentral-diagnostics 200 in 16ms
========== RINGCENTRAL ACCOUNT INFO API - START ==========
Timestamp: 2025-05-22T00:26:48.341Z
Making API call to RingCentral for account info
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:48.342Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Account info data: {
  uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004',
  id: 63361756004,
  serviceInfo: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/service-info',
    brand: { id: '1210', name: 'RingCentral', homeCountry: [Object] },
    servicePlan: { id: '4999', name: 'RingEX Advanced™', edition: 'Advanced' },
    billingPlan: {
      id: '999',
      name: 'Active [NBS]',
      durationUnit: 'Month',
      duration: 0,
      type: 'Regular',
      includedPhoneLines: 0
    },
    contractedCountry: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
      id: '1',
      name: 'United States',
      isoCode: 'US'
    }
  },
  operator: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004',
    id: 63361756004,
    extensionNumber: '101'
  },
  mainNumber: '+16124644045',
  status: 'Confirmed',
  signupInfo: {
    tosAccepted: true,
    marketingAccepted: false,
    creationTime: '2023-04-03T15:33:07Z'
  },
  setupWizardState: 'Completed',
  regionalSettings: {
    timezone: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/timezone/101',
      id: '101',
      name: 'America/Los_Angeles',
      description: 'Pacific Time (America/Los_Angeles)',
      bias: '-480'
    },
    homeCountry: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
      id: '1',
      name: 'United States'
    },
    language: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    greetingLanguage: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    formattingLocale: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    timeFormat: '12h',
    currency: {
      id: 1,
      code: 'USD',
      name: 'United States Dollars',
      symbol: '$',
      minorSymbol: '¢'
    }
  },
  federated: false,
  bsid: '2850476002|2849445002',
  limits: {
    freeSoftPhoneLinesPerExtension: 1,
    meetingSize: 100,
    maxMonitoredExtensionsPerUser: 100,
    maxExtensionNumberLength: 5,
    cloudRecordingStorage: 0
  }
}
========== RINGCENTRAL ACCOUNT INFO API - END ==========
 GET /api/ringcentral/account-info 200 in 207ms
========== RINGCENTRAL ACCOUNT INFO API - START ==========
Timestamp: 2025-05-22T00:26:48.628Z
Making API call to RingCentral for account info
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:48.629Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
========== RINGCENTRAL EXTENSION INFO API - START ==========
Timestamp: 2025-05-22T00:26:48.703Z
Making API call to RingCentral for extension info
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:48.703Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Account info data: {
  uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004',
  id: 63361756004,
  serviceInfo: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/service-info',
    brand: { id: '1210', name: 'RingCentral', homeCountry: [Object] },
    servicePlan: { id: '4999', name: 'RingEX Advanced™', edition: 'Advanced' },
    billingPlan: {
      id: '999',
      name: 'Active [NBS]',
      durationUnit: 'Month',
      duration: 0,
      type: 'Regular',
      includedPhoneLines: 0
    },
    contractedCountry: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
      id: '1',
      name: 'United States',
      isoCode: 'US'
    }
  },
  operator: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004',
    id: 63361756004,
    extensionNumber: '101'
  },
  mainNumber: '+16124644045',
  status: 'Confirmed',
  signupInfo: {
    tosAccepted: true,
    marketingAccepted: false,
    creationTime: '2023-04-03T15:33:07Z'
  },
  setupWizardState: 'Completed',
  regionalSettings: {
    timezone: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/timezone/101',
      id: '101',
      name: 'America/Los_Angeles',
      description: 'Pacific Time (America/Los_Angeles)',
      bias: '-480'
    },
    homeCountry: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
      id: '1',
      name: 'United States'
    },
    language: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    greetingLanguage: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    formattingLocale: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    timeFormat: '12h',
    currency: {
      id: 1,
      code: 'USD',
      name: 'United States Dollars',
      symbol: '$',
      minorSymbol: '¢'
    }
  },
  federated: false,
  bsid: '2850476002|2849445002',
  limits: {
    freeSoftPhoneLinesPerExtension: 1,
    meetingSize: 100,
    maxMonitoredExtensionsPerUser: 100,
    maxExtensionNumberLength: 5,
    cloudRecordingStorage: 0
  }
}
========== RINGCENTRAL ACCOUNT INFO API - END ==========
 GET /api/ringcentral/account-info 200 in 95ms
Extension info data: {
  uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004',
  id: 63361756004,
  extensionNumber: '101',
  contact: {
    firstName: 'Brian',
    lastName: 'Berge',
    company: 'Twin Cities Coverage',
    email: 'brian@twincitiescoverage.com',
    businessPhone: '+16127996380',
    businessAddress: {
      street: '1935 Wayzata Boulevard, |185',
      city: 'Long Lake',
      state: 'Minnesota',
      zip: '55356',
      country: 'United States'
    },
    emailAsLoginName: true,
    pronouncedName: { type: 'Recorded', text: 'Brian Berge', prompt: [Object] }
  },
  name: 'Brian Berge',
  type: 'User',
  status: 'Enabled',
  serviceFeatures: [
    { featureName: 'SMS', enabled: true },
    { featureName: 'SMSReceiving', enabled: true },
    { featureName: 'Pager', enabled: true },
    { featureName: 'PagerReceiving', enabled: true },
    { featureName: 'Voicemail', enabled: true },
    { featureName: 'Fax', enabled: true },
    { featureName: 'FaxReceiving', enabled: true },
    { featureName: 'DND', enabled: true },
    { featureName: 'RingOut', enabled: true },
    {
      featureName: 'InternationalCalling',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'Presence', enabled: true },
    { featureName: 'VideoConferencing', enabled: true },
    { featureName: 'SalesForce', enabled: true },
    { featureName: 'Intercom', enabled: true },
    { featureName: 'Paging', enabled: true },
    { featureName: 'Conferencing', enabled: true },
    { featureName: 'VoipCalling', enabled: true },
    { featureName: 'FreeSoftPhoneLines', enabled: true },
    {
      featureName: 'HipaaCompliance',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'CallPark', enabled: true },
    { featureName: 'SharedLines', enabled: true },
    {
      featureName: 'OnDemandCallRecording',
      enabled: false,
      reason: 'ExtensionLimitation'
    },
    { featureName: 'Reports', enabled: true },
    { featureName: 'CallForwarding', enabled: true },
    { featureName: 'DeveloperPortal', enabled: true },
    {
      featureName: 'EncryptionAtRest',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'BlockedMessageForwarding',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'EmergencyCalling',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'HDVoice', enabled: true },
    {
      featureName: 'SingleExtensionUI',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'CallSupervision', enabled: true },
    { featureName: 'VoicemailToText', enabled: true },
    { featureName: 'WebPhone', enabled: true },
    { featureName: 'RCTeams', enabled: true },
    { featureName: 'UserManagement', enabled: true },
    { featureName: 'Calendar', enabled: true },
    {
      featureName: 'CallerIdControl',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'AutomaticInboundCallRecording', enabled: true },
    { featureName: 'AutomaticOutboundCallRecording', enabled: true },
    {
      featureName: 'AutomaticCallRecordingMute',
      enabled: false,
      reason: 'ExtensionLimitation'
    },
    { featureName: 'SoftPhoneUpdate', enabled: true },
    {
      featureName: 'LinkedSoftphoneLines',
      enabled: false,
      reason: 'AccountTypeLimitation'
    },
    {
      featureName: 'CallQualitySurvey',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'AccountFederation',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'MMS', enabled: true },
    { featureName: 'CallParkLocations', enabled: true },
    {
      featureName: 'ExternalDirectoryIntegration',
      enabled: false,
      reason: 'AccountTypeLimitation'
    },
    { featureName: 'CallSwitch', enabled: true },
    { featureName: 'PromoMessage', enabled: true },
    {
      featureName: 'SiteCodes',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'InternationalSMS',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'ConferencingNumber', enabled: true },
    { featureName: 'VoipCallingOnMobile', enabled: true },
    {
      featureName: 'DynamicConference',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'ConfigureDelegates', enabled: true },
    { featureName: 'Archiver', enabled: true },
    { featureName: 'EmergencyAddressAutoUpdate', enabled: true },
    {
      featureName: 'MobileVoipEmergencyCalling',
      enabled: false,
      reason: 'AccountLimitation'
    }
  ],
  regionalSettings: {
    timezone: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/timezone/53',
      id: '53',
      name: 'US/Central',
      description: 'Central Time (US & Canada)',
      bias: '-360'
    },
    homeCountry: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
      id: '1',
      name: 'United States',
      isoCode: 'US',
      callingCode: '1'
    },
    language: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    greetingLanguage: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    formattingLocale: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    timeFormat: '12h'
  },
  setupWizardState: 'Completed',
  permissions: { admin: { enabled: true }, internationalCalling: { enabled: true } },
  profileImage: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/profile-image'
  },
  account: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004',
    id: '63361756004'
  },
  hidden: false,
  assignedCountry: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
    id: '1',
    name: 'United States',
    isoCode: 'US'
  },
  creationTime: '2023-04-03T15:32:58Z'
}
========== RINGCENTRAL EXTENSION INFO API - END ==========
 GET /api/ringcentral/extension-info 200 in 184ms
========== RINGCENTRAL EXTENSION INFO API - START ==========
Timestamp: 2025-05-22T00:26:48.967Z
Making API call to RingCentral for extension info
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:48.968Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
========== RINGCENTRAL PHONE NUMBERS API - START ==========
Timestamp: 2025-05-22T00:26:49.004Z
Making API call to RingCentral for phone numbers
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:49.004Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Extension info data: {
  uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004',
  id: 63361756004,
  extensionNumber: '101',
  contact: {
    firstName: 'Brian',
    lastName: 'Berge',
    company: 'Twin Cities Coverage',
    email: 'brian@twincitiescoverage.com',
    businessPhone: '+16127996380',
    businessAddress: {
      street: '1935 Wayzata Boulevard, |185',
      city: 'Long Lake',
      state: 'Minnesota',
      zip: '55356',
      country: 'United States'
    },
    emailAsLoginName: true,
    pronouncedName: { type: 'Recorded', text: 'Brian Berge', prompt: [Object] }
  },
  name: 'Brian Berge',
  type: 'User',
  status: 'Enabled',
  serviceFeatures: [
    { featureName: 'SMS', enabled: true },
    { featureName: 'SMSReceiving', enabled: true },
    { featureName: 'Pager', enabled: true },
    { featureName: 'PagerReceiving', enabled: true },
    { featureName: 'Voicemail', enabled: true },
    { featureName: 'Fax', enabled: true },
    { featureName: 'FaxReceiving', enabled: true },
    { featureName: 'DND', enabled: true },
    { featureName: 'RingOut', enabled: true },
    {
      featureName: 'InternationalCalling',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'Presence', enabled: true },
    { featureName: 'VideoConferencing', enabled: true },
    { featureName: 'SalesForce', enabled: true },
    { featureName: 'Intercom', enabled: true },
    { featureName: 'Paging', enabled: true },
    { featureName: 'Conferencing', enabled: true },
    { featureName: 'VoipCalling', enabled: true },
    { featureName: 'FreeSoftPhoneLines', enabled: true },
    {
      featureName: 'HipaaCompliance',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'CallPark', enabled: true },
    { featureName: 'SharedLines', enabled: true },
    {
      featureName: 'OnDemandCallRecording',
      enabled: false,
      reason: 'ExtensionLimitation'
    },
    { featureName: 'Reports', enabled: true },
    { featureName: 'CallForwarding', enabled: true },
    { featureName: 'DeveloperPortal', enabled: true },
    {
      featureName: 'EncryptionAtRest',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'BlockedMessageForwarding',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'EmergencyCalling',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'HDVoice', enabled: true },
    {
      featureName: 'SingleExtensionUI',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'CallSupervision', enabled: true },
    { featureName: 'VoicemailToText', enabled: true },
    { featureName: 'WebPhone', enabled: true },
    { featureName: 'RCTeams', enabled: true },
    { featureName: 'UserManagement', enabled: true },
    { featureName: 'Calendar', enabled: true },
    {
      featureName: 'CallerIdControl',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'AutomaticInboundCallRecording', enabled: true },
    { featureName: 'AutomaticOutboundCallRecording', enabled: true },
    {
      featureName: 'AutomaticCallRecordingMute',
      enabled: false,
      reason: 'ExtensionLimitation'
    },
    { featureName: 'SoftPhoneUpdate', enabled: true },
    {
      featureName: 'LinkedSoftphoneLines',
      enabled: false,
      reason: 'AccountTypeLimitation'
    },
    {
      featureName: 'CallQualitySurvey',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'AccountFederation',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'MMS', enabled: true },
    { featureName: 'CallParkLocations', enabled: true },
    {
      featureName: 'ExternalDirectoryIntegration',
      enabled: false,
      reason: 'AccountTypeLimitation'
    },
    { featureName: 'CallSwitch', enabled: true },
    { featureName: 'PromoMessage', enabled: true },
    {
      featureName: 'SiteCodes',
      enabled: false,
      reason: 'AccountLimitation'
    },
    {
      featureName: 'InternationalSMS',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'ConferencingNumber', enabled: true },
    { featureName: 'VoipCallingOnMobile', enabled: true },
    {
      featureName: 'DynamicConference',
      enabled: false,
      reason: 'AccountLimitation'
    },
    { featureName: 'ConfigureDelegates', enabled: true },
    { featureName: 'Archiver', enabled: true },
    { featureName: 'EmergencyAddressAutoUpdate', enabled: true },
    {
      featureName: 'MobileVoipEmergencyCalling',
      enabled: false,
      reason: 'AccountLimitation'
    }
  ],
  regionalSettings: {
    timezone: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/timezone/53',
      id: '53',
      name: 'US/Central',
      description: 'Central Time (US & Canada)',
      bias: '-360'
    },
    homeCountry: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
      id: '1',
      name: 'United States',
      isoCode: 'US',
      callingCode: '1'
    },
    language: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    greetingLanguage: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    formattingLocale: {
      id: '1033',
      name: 'English (United States)',
      localeCode: 'en-US'
    },
    timeFormat: '12h'
  },
  setupWizardState: 'Completed',
  permissions: { admin: { enabled: true }, internationalCalling: { enabled: true } },
  profileImage: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/profile-image'
  },
  account: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004',
    id: '63361756004'
  },
  hidden: false,
  assignedCountry: {
    uri: 'https://platform.ringcentral.com/restapi/v1.0/dictionary/country/1',
    id: '1',
    name: 'United States',
    isoCode: 'US'
  },
  creationTime: '2023-04-03T15:32:58Z'
}
========== RINGCENTRAL EXTENSION INFO API - END ==========
 GET /api/ringcentral/extension-info 200 in 105ms
Phone numbers data: {
  uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/phone-number?page=1&perPage=100',
  records: [
    {
      features: [Array],
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/phone-number/121978005004',
      id: 121978005004,
      phoneNumber: '+16124643934',
      paymentType: 'Local',
      location: 'Long Lake, MN',
      type: 'VoiceFax',
      usageType: 'DirectNumber',
      status: 'Normal',
      country: [Object],
      label: 'Farmers',
      primary: true
    },
    {
      features: [Array],
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/phone-number/121978004004',
      id: 121978004004,
      phoneNumber: '+16124644045',
      paymentType: 'Local',
      location: 'Twin Cities, MN',
      type: 'VoiceFax',
      usageType: 'MainCompanyNumber',
      status: 'Normal',
      country: [Object],
      primary: false
    },
    {
      features: [Array],
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/phone-number/122424848004',
      id: 122424848004,
      phoneNumber: '+16127786178',
      paymentType: 'Local',
      location: 'Golden Valley, Twin Cities, MN',
      type: 'VoiceFax',
      usageType: 'DirectNumber',
      status: 'Normal',
      country: [Object],
      primary: false
    }
  ],
  paging: {
    page: 1,
    totalPages: 1,
    perPage: 100,
    totalElements: 3,
    pageStart: 0,
    pageEnd: 2
  },
  navigation: {
    firstPage: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/phone-number?page=1&perPage=100'
    },
    lastPage: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/phone-number?page=1&perPage=100'
    }
  }
}
========== RINGCENTRAL PHONE NUMBERS API - END ==========
 GET /api/ringcentral/phone-numbers 200 in 87ms
========== RINGCENTRAL PERMISSIONS API - START ==========
Timestamp: 2025-05-22T00:26:49.196Z
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:49.198Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Extracting permissions from token
Token scopes: []
========== RINGCENTRAL PERMISSIONS API - END ==========
 GET /api/ringcentral/permissions 200 in 25ms
========== RINGCENTRAL PHONE NUMBERS API - START ==========
Timestamp: 2025-05-22T00:26:49.204Z
Making API call to RingCentral for phone numbers
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:49.205Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Phone numbers data: {
  uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/phone-number?page=1&perPage=100',
  records: [
    {
      features: [Array],
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/phone-number/121978005004',
      id: 121978005004,
      phoneNumber: '+16124643934',
      paymentType: 'Local',
      location: 'Long Lake, MN',
      type: 'VoiceFax',
      usageType: 'DirectNumber',
      status: 'Normal',
      country: [Object],
      label: 'Farmers',
      primary: true
    },
    {
      features: [Array],
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/phone-number/121978004004',
      id: 121978004004,
      phoneNumber: '+16124644045',
      paymentType: 'Local',
      location: 'Twin Cities, MN',
      type: 'VoiceFax',
      usageType: 'MainCompanyNumber',
      status: 'Normal',
      country: [Object],
      primary: false
    },
    {
      features: [Array],
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/phone-number/122424848004',
      id: 122424848004,
      phoneNumber: '+16127786178',
      paymentType: 'Local',
      location: 'Golden Valley, Twin Cities, MN',
      type: 'VoiceFax',
      usageType: 'DirectNumber',
      status: 'Normal',
      country: [Object],
      primary: false
    }
  ],
  paging: {
    page: 1,
    totalPages: 1,
    perPage: 100,
    totalElements: 3,
    pageStart: 0,
    pageEnd: 2
  },
  navigation: {
    firstPage: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/phone-number?page=1&perPage=100'
    },
    lastPage: {
      uri: 'https://platform.ringcentral.com/restapi/v1.0/account/63361756004/extension/63361756004/phone-number?page=1&perPage=100'
    }
  }
}
========== RINGCENTRAL PHONE NUMBERS API - END ==========
 GET /api/ringcentral/phone-numbers 200 in 107ms
========== RINGCENTRAL DIAGNOSTICS API - START ==========
Timestamp: 2025-05-22T00:26:49.314Z
Environment variables: {
  RINGCENTRAL_SERVER: 'https://platform.ringcentral.com',
  RINGCENTRAL_CLIENT_ID: '[REDACTED]',
  RINGCENTRAL_CLIENT_SECRET: '[REDACTED]',
  RINGCENTRAL_USERNAME: 'Not set',
  RINGCENTRAL_EXTENSION: undefined,
  RINGCENTRAL_PASSWORD: 'Not set',
  RINGCENTRAL_FROM_NUMBER: '+16124643934',
  NEXT_PUBLIC_RINGCENTRAL_FROM_NUMBER: '+16124643934',
  REDIRECT_URI: 'http://localhost:3000/oauth-callback',
  NEXT_PUBLIC_APP_URL: 'http://localhost:3000',
  NEXT_PUBLIC_RINGCENTRAL_CLIENT_ID: 'Set (hidden)',
  NEXT_PUBLIC_RINGCENTRAL_SERVER: 'https://platform.ringcentral.com',
  NEXT_PUBLIC_RINGCENTRAL_DOMAIN: undefined
}
Checking authentication tokens
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:49.315Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Authentication status: {
  hasAccessToken: true,
  accessTokenLength: 379,
  isAccessTokenValidSyncCheck: true,
  hasRefreshToken: true,
  accessTokenCookie: 'SUFEMDFQMDFQQVM...',
  refreshTokenCookie: 'SUFEMDFQMDFQQVM...',
  accessTokenExpiryCookie: '1747875748775',
  refreshTokenExpiryCookie: '1748476948853'
}
Configuration validation: {
  serverUrlValid: true,
  clientIdPresent: true,
  clientSecretPresent: true,
  fromNumberPresent: true,
  fromNumberFormat: true,
  redirectUriPresent: true,
  redirectUriValid: true
}
Configuration inconsistencies: []
Recommendations: []
========== RINGCENTRAL DIAGNOSTICS API - END ==========
 GET /api/ringcentral/diagnostics 200 in 16ms
========== RINGCENTRAL PERMISSIONS API - START ==========
Timestamp: 2025-05-22T00:26:49.369Z
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:49.370Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Extracting permissions from token
Token scopes: []
========== RINGCENTRAL PERMISSIONS API - END ==========
 GET /api/ringcentral/permissions 200 in 10ms
========== RINGCENTRAL DIAGNOSTICS API - START ==========
Timestamp: 2025-05-22T00:26:49.464Z
Environment variables: {
  RINGCENTRAL_SERVER: 'https://platform.ringcentral.com',
  RINGCENTRAL_CLIENT_ID: '[REDACTED]',
  RINGCENTRAL_CLIENT_SECRET: '[REDACTED]',
  RINGCENTRAL_USERNAME: 'Not set',
  RINGCENTRAL_EXTENSION: undefined,
  RINGCENTRAL_PASSWORD: 'Not set',
  RINGCENTRAL_FROM_NUMBER: '+16124643934',
  NEXT_PUBLIC_RINGCENTRAL_FROM_NUMBER: '+16124643934',
  REDIRECT_URI: 'http://localhost:3000/oauth-callback',
  NEXT_PUBLIC_APP_URL: 'http://localhost:3000',
  NEXT_PUBLIC_RINGCENTRAL_CLIENT_ID: 'Set (hidden)',
  NEXT_PUBLIC_RINGCENTRAL_SERVER: 'https://platform.ringcentral.com',
  NEXT_PUBLIC_RINGCENTRAL_DOMAIN: undefined
}
Checking authentication tokens
RingCentralClient: Ensuring token is valid...
RingCentralClient: Token state: {
  hasAccessToken: true,
  accessTokenLength: 379,
  hasRefreshToken: true,
  expiryTime: '2025-05-22T01:02:28.775Z',
  isExpired: false,
  isNearExpiry: false,
  nowTime: '2025-05-22T00:26:49.465Z',
  tokenChanged: true,
  timeRemaining: '36 minutes'
}
Authentication status: {
  hasAccessToken: true,
  accessTokenLength: 379,
  isAccessTokenValidSyncCheck: true,
  hasRefreshToken: true,
  accessTokenCookie: 'SUFEMDFQMDFQQVM...',
  refreshTokenCookie: 'SUFEMDFQMDFQQVM...',
  accessTokenExpiryCookie: '1747875748775',
  refreshTokenExpiryCookie: '1748476948853'
}
Configuration validation: {
  serverUrlValid: true,
  clientIdPresent: true,
  clientSecretPresent: true,
  fromNumberPresent: true,
  fromNumberFormat: true,
  redirectUriPresent: true,
  redirectUriValid: true
}
Configuration inconsistencies: []
Recommendations: []
========== RINGCENTRAL DIAGNOSTICS API - END ==========
 GET /api/ringcentral/diagnostics 200 in 9ms
 GET /dashboard/settings/development/ringcentral-diagnostics 200 in 194ms
 GET /dashboard/settings/development/ringcentral-diagnostics 200 in 60ms
 GET /dashboard/settings/development/ringcentral-diagnostics 200 in 56ms
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 1603ms (2442 modules)
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 1882ms